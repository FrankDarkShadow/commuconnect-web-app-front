<div class="form-container">
  <h2>Cambiar contraseña</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-card">
    
    <div class="form-group">
      <label>Contraseña actual</label>
      <div class="input-con-icono">
        <input [type]="mostrarActual ? 'text' : 'password'" formControlName="actual" placeholder="Contraseña actual" />
        <button type="button" (click)="toggleMostrarActual()">👁️</button>
      </div>
    </div>

    <div class="form-group">
      <label>Contraseña nueva</label>
      <div class="input-con-icono">
        <input [type]="mostrarNueva ? 'text' : 'password'" formControlName="nueva" placeholder="Contraseña nueva" />
        <button type="button" (click)="toggleMostrarNueva()">👁️</button>
      </div>
      <p class="error" *ngIf="form.get('nueva')?.touched && form.get('nueva')?.errors?.['minlength']">
        ⚠️ La contraseña debe tener al menos 8 caracteres.
      </p>
      <p class="error" *ngIf="form.touched && form.errors?.['igualActual']">
        ⚠️ La nueva contraseña no puede ser igual a la anterior.
      </p>
    </div>

    <div class="form-group">
      <label>Repita la contraseña nueva</label>
      <div class="input-con-icono">
        <input [type]="mostrarRepetir ? 'text' : 'password'" formControlName="repetir" placeholder="Repita la contraseña nueva" />
        <button type="button" (click)="toggleMostrarRepetir()">👁️</button>
      </div>
      <p class="error" *ngIf="form.get('repetir')?.touched && form.get('repetir')?.errors?.['minlength']">
        ⚠️ La contraseña debe tener al menos 8 caracteres.
      </p>
      <p class="error" *ngIf="form.touched && form.errors?.['noCoincide']">
        ⚠️ Las contraseñas nuevas no coinciden.
      </p>
    </div>

    <div class="botones">
      <button type="submit" class="btn-cambiar" [disabled]="form.invalid">Cambiar</button>
    </div>

    <p class="error" *ngIf="error">{{ error }}</p>
    <p class="success" *ngIf="success">{{ success }}</p>
  </form>
</div>
